<div class="chatbot">
  <div #chatbotContent class="chatbot-content">
    <lib-chat-bubble [chatMessage]="msg" *ngFor="let msg of messages" [ellipsis]="loaderIcon"></lib-chat-bubble>
  </div>

<div class="chatbot-footer" role="footer">
  <div *ngIf="hasComponent()">
    <ng-template adHost></ng-template>
  </div>

  <div *ngFor="let answer of currentAnswers">
    <div class="input-text" *ngIf="answer?.answerType == 'INPUT'">
      <input #txtInput [name]="content" [(ngModel)]="content" (keyup)="onKey(txtInput.value)"
             class="input-text-content"/>
      <button class="chatbot-button" (click)="sendMessage(answer?.answerType, answer)">{{answer.text}}</button>
    </div>
    <div class="input-select" *ngIf="answer?.answerType == 'SELECT'">
      <select [(ngModel)]="content" *ngIf="!currentMsg.src || !currentMsg.src.label || currentMsg.src.label.length == 0">
        <option *ngFor="let item of data | async" (click)="selectContent(item)">{{item}}</option>
        <option> ----- </option>
        <option (click)="selectContent(unknowItemKey)">{{unknowItem}}</option>
      </select>
      <select [(ngModel)]="content" *ngIf="currentMsg.src?.label?.length > 0">
        <option *ngFor="let item of data | async" (click)="selectContent(item)">{{item[currentMsg.src.label]}}</option>
        <option> ----- </option>
        <option (click)="selectContent(unknowItemKey)">{{unknowItem}}</option>
      </select>
      <button class="chatbot-button" (click)="sendMessage(answer?.answerType, answer)">{{answer.text}}</button>
    </div>
    <div class="input-select" *ngIf="answer?.answerType == 'AUTOCOMPLETE'">
      <div item-content>
        <div class="input-select-content" *ngIf="data">
          <div *ngFor="let item of data | async">
            <a (click)="selectContent(item)" *ngIf="!currentMsg.src || !currentMsg.src.label || currentMsg.src.label.length == 0">{{item}}</a>
            <a (click)="selectContent(item)"
               *ngIf="currentMsg.src?.label?.length > 0">{{item[currentMsg.src.label]}}</a>
          </div>
          <div *ngIf="hasDataContent">
            <span> ----- </span>
          </div>
          <div *ngIf="hasDataContent">
            <a (click)="selectContent(unknowItemKey)">{{unknowItem}}</a>
          </div>
        </div>
      </div>
    </div>
    <div class="input-button" *ngIf="answer?.answerType == 'BUTTON' || answer?.answerType == 'CLOSE'">
      <button class="chatbot-button" (click)="sendMessage(answer?.answerType, answer)">{{answer.text}}</button>
    </div>
  </div>
</div>
